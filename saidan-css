/* =========================
   ğŸ™ ã‚¿ã‚³æ°‘ï¼ˆé‡ç”£ç”¨ï¼šå…±é€šï¼‰
   ========================= */
.map-wrap .takomin{
  position: absolute;
  transform: translate(-50%, -100%);
  width: clamp(56px, 6vw, 64px);
  z-index: 60;
  background: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.map-wrap .takomin img{
  width: 100%;
  height: auto;
  display: block;
  image-rendering: pixelated;
}

.map-wrap .takomin-balloon{
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 70;
  display: none;
  background: #000;
  color: #fff;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: clamp(11px, 2.8vw, 14px);
  width: max-content;
  max-width: min(420px, 85vw);
  white-space: pre-line;
  line-height: 1.4;
  pointer-events: none;
}



.map-wrap .takomin[data-id="bigmans"]{
  width: clamp(86px, 10vw, 140px);
}

.map-wrap .takomin[data-id="twobit"]{
  width: clamp(60px, 10vw, 140px);
}

.map-wrap .takomin[data-id="me13"]{
  width: clamp(130px, 10vw, 140px);
}

.map-wrap .takomin[data-id="tawa"]{
  width: clamp(130px, 10vw, 200px);
}


/* =========================
   ğŸ™ ã‚¿ã‚³æ°‘ï¼ˆé‡ç”£ç”¨ï¼šåº§æ¨™ï¼‰
   ========================= */
.map-wrap .takomin--me1{ top:5%; left:5%; }
.map-wrap .takomin--me2{ top:5%; left:70%; }
.map-wrap .takomin--me3{ top:13%; left:5%; }
.map-wrap .takomin--me4{ top:13%; left:70%; }
.map-wrap .takomin--me5{ top:21%; left:50%; }
.map-wrap .takomin--me6{ top:22%; left:5%; }
.map-wrap .takomin--me7{ top:21.6%; left:73%; }
.map-wrap .takomin--me8{ top:30.5%; left:5%; }
.map-wrap .takomin--me9{ top:29%; left:68%; }
.map-wrap .takomin--me10{ top:39%; left:5%; }
.map-wrap .takomin--me12{ top:38%; left:70%; }
.map-wrap .takomin--me13{ top:68.8%; left:52%; }
.map-wrap .takomin--tawa{ top:95%; left:50%; }
.map-wrap .takomin--neko{ top:89%; left:32%; }


.map-wrap .takomin--ghost{ top:72.9%; left:25%; }
.map-wrap .takomin--yousha{ top:65%; left:27%; }
.map-wrap .takomin--motoyu{ top:73%; left:50.8%; }
.map-wrap .takomin--kbc{ top:47.5%; left:75%; }
.map-wrap .takomin--katana{ top:47.3%; left:23%; }
.map-wrap .takomin--hotel{ top:58.6%; hotel:31%; }
.map-wrap .takomin--bigmans{ top:57.7%; left:24%; }
.map-wrap .takomin--twobit{ top:80%; left:25%; }
.map-wrap .takomin--hanaya{ top:65%; left:76%; }
.map-wrap .takomin--mars{ top:72.8%; left:77%; }
.map-wrap .takomin--dollis{ top:57.8%; left:75%; }






/* å¤œã ã‘è¡¨ç¤ºåˆ¶å¾¡ï¼ˆbodyã« is-night ãŒä»˜ãå‰æï¼‰ */
.night-only{ display:none; }
html.is-night .night-only{ display:block; }






/* =========================
   ğŸ—º map-wrap ã‚’çµ¶å¯¾é…ç½®ã®åŸºæº–ã«ã™ã‚‹ï¼ˆé‡è¦ï¼‰
   ========================= */
.map-wrap{ position: relative; }

/* =========================
   ğŸ™ ã‚¿ã‚³æ°‘ï¼šå‹•ããƒ—ãƒªã‚»ãƒƒãƒˆ
   ========================= */

@keyframes takominFloat {
  0%,100% { transform: translateY(0); }
  50%     { transform: translateY(-3px); }
}

@keyframes takominBob {
  0%,100% { transform: translateY(0) rotate(0deg); }
  50%     { transform: translateY(-2px) rotate(-1deg); }
}

@keyframes takominShake {
  0%,100% { transform: translateX(0); }
  20%     { transform: translateX(-1px); }
  40%     { transform: translateX(1px); }
  60%     { transform: translateX(-1px); }
  80%     { transform: translateX(1px); }
}

/* âœ… åŸºæœ¬ï¼šãµã‚ãµã‚ï¼ˆå¸¸æ™‚ï¼‰ */
.map-wrap .takomin.is-float img{
  animation: takominFloat 1.8s ease-in-out infinite;
  will-change: transform;
}

/* âœ… ã‚‚ã†å°‘ã—â€œç”Ÿãç‰©æ„Ÿâ€ï¼ˆå¸¸æ™‚ï¼‰ */
.map-wrap .takomin.is-bob img{
  animation: takominBob 1.6s ease-in-out infinite;
  will-change: transform;
}

/* âœ… ã‚¿ãƒƒãƒ—ã—ãŸæ™‚ã ã‘éœ‡ãˆã‚‹ï¼ˆJSã§ä»˜ã‘å¤–ã—ï¼‰ */
.map-wrap .takomin.is-shake img{
  animation: takominShake .22s linear infinite;
  will-change: transform;
}

/* =========================
   ğŸ™ ã‚¿ã‚³æ°‘ï¼šè¶³è¸ã¿ï¼ˆãƒˆã‚³ãƒˆã‚³ï¼‰
   ========================= */

@keyframes takominStep {
  0%   { transform: translateY(0); }
  25%  { transform: translateY(-1px); }
  50%  { transform: translateY(0); }
  75%  { transform: translateY(-1px); }
  100% { transform: translateY(0); }
}

/* âœ… å¸¸æ™‚è¶³è¸ã¿ */
.map-wrap .takomin.is-step img{
  animation: takominStep .6s steps(2) infinite;
  will-change: transform;
}

/* âœ… iPhoneå¯¾ç­–ï¼šå‹•ãã‚’æ¸›ã‚‰ã™è¨­å®šã®äººã«ã¯æ­¢ã‚ã‚‹ */
@media (prefers-reduced-motion: reduce){
  .map-wrap .takomin img{ animation: none !important; }
}

/* ã‚¿ã‚³æ°‘ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆãƒœã‚¿ãƒ³ or imgï¼‰ã«ä»˜ã‘ã‚‹å…±é€šã‚¯ãƒ©ã‚¹ */
.takomin--glow img{
  /* ç”»åƒã®ç¸ã‚’å…‰ã‚‰ã›ã‚‹ï¼šé€æ˜PNGã§ã‚‚åŠ¹ã */
  filter:
    drop-shadow(0 0 2px rgba(255, 240, 150, 0.95))
    drop-shadow(0 0 6px rgba(255, 200, 80, 0.75))
    drop-shadow(0 0 14px rgba(255, 140, 20, 0.55));
}


@keyframes takominGlow{
  0%,100%{
    filter:
      drop-shadow(0 0 2px rgba(255,240,150,.85))
      drop-shadow(0 0 6px rgba(255,200,80,.55))
      drop-shadow(0 0 14px rgba(255,140,20,.35));
  }
  50%{
    filter:
      drop-shadow(0 0 3px rgba(255,255,200,.95))
      drop-shadow(0 0 10px rgba(255,210,120,.8))
      drop-shadow(0 0 22px rgba(255,160,60,.6));
  }
}
















/* âœ… ãƒœã‚¹ã‚²ãƒ¼ãƒˆï¼ˆç”»åƒãƒªãƒ³ã‚¯ï¼‰ */
.boss-gate{
  position:absolute;
  top: 41.3%;     /* â†èª¿æ•´ */
  left: 50%;      /* â†èª¿æ•´ */
  transform: translateX(-50%);
  width: 18%;     /* â†èª¿æ•´ */
  z-index: 12;
  display:block;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}

/* ç”»åƒãã®ã‚‚ã® */
.boss-gate img{
  width: 100%;
  height: auto;
  display:block;
  image-rendering: pixelated;
}

/* ï¼ˆä»»æ„ï¼‰å¤œã®ãƒœã‚¹æ„Ÿï¼šãµã‚ã£ã¨è„ˆå‹• */
html.is-night .boss-gate{
  animation: bossPulse 1.6s ease-in-out infinite;
}
@keyframes bossPulse{
  0%{ transform: translateX(-50%) scale(1);   opacity: 0.95; }
  50%{ transform: translateX(-50%) scale(1.04); opacity: 1; }
  100%{ transform: translateX(-50%) scale(1); opacity: 0.95; }
}

/* ===== ãƒœã‚¹ä¼šè©±ï¼ˆæˆ¦ã†å‰ï¼‰ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ ===== */
.boss-talk{
  position: fixed;
  inset: 0;
  display: none;
  z-index: 9998;
  background: rgba(0,0,0,0.78);
}
.boss-talk-panel{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: min(420px, 90vw);
  padding: 14px 12px;
  border: 3px solid #fff;
  background: #000;
  color: #fff;
  font-family: system-ui, sans-serif;
}
.boss-talk-title{ font-size: 14px; margin-bottom: 8px; }
.boss-talk-text{
  font-size: 14px;
  line-height: 1.6;
  margin-bottom: 12px;
  min-height: 3.2em;
  opacity: 0.95;
}
.boss-talk-buttons{
  display: flex;
  gap: 8px;
  justify-content: center;
}
.boss-talk-buttons button{
  padding: 8px 10px;
  border: 2px solid #fff;
  background: #000;
  color: #fff;
  cursor: pointer;
}
.boss-talk-buttons button:active{ transform: translateY(1px); }

/* ===== ãƒãƒˆãƒ«çµæœã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ ===== */
.boss-overlay{
  position: fixed;
  inset: 0;
  display: none;
  z-index: 9999;
  background: rgba(0,0,0,0.78);
}
.boss-panel{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: min(420px, 90vw);
  padding: 14px 12px;
  border: 3px solid #fff;
  background: #000;
  color: #fff;
  text-align: center;
  font-family: system-ui, sans-serif;
}
.boss-head{ font-size: 13px; opacity: 0.9; margin-bottom: 8px; }
.boss-name{ font-size: 16px; margin-bottom: 10px; }
.boss-cardframe{
  width: min(300px, 78vw);
  margin: 0 auto 10px;
  border: 2px solid #fff;
  padding: 8px;
  background: #111;
}
.boss-cardimg{
  width: 100%;
  height: auto;
  display: block;
  image-rendering: pixelated;
}
.boss-result{ font-size: 28px; letter-spacing: 2px; margin-top: 6px; }
.boss-score{ margin-top: 4px; font-size: 22px; }
.boss-comment{
  margin-top: 8px;
  font-size: 14px;
  line-height: 1.45;
  min-height: 2.8em;
  opacity: 0.95;
}
.boss-footer{ margin-top: 10px; font-size: 12px; opacity: 0.75; line-height: 1.4; }
.boss-buttons{
  display: flex;
  gap: 8px;
  justify-content: center;
  margin-top: 12px;
}
.boss-buttons button{
  padding: 8px 10px;
  border: 2px solid #fff;
  background: #000;
  color: #fff;
  cursor: pointer;
}
.boss-buttons button:active{ transform: translateY(1px); }

/* æ¿€ãƒ¬ã‚¢ï¼šè™¹æ  */
.boss-panel.rainbow{
  border-color: transparent;
  background:
    linear-gradient(#000, #000) padding-box,
    linear-gradient(90deg, #ff3, #f3f, #3ff, #3f3, #ff3) border-box;
  border: 3px solid transparent;
}
